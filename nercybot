import logging

from telethon import events
from telethon.tl.types import Message

from .. import loader, utils


logger = logging.getLogger(__name__)


@loader.tds
class NercyMod(loader.Module):
    """A simple module that responds to the ".nercy" command"""

    strings = {
        "name": "Nercy",
        "working": "Nercy bot - working",
    }

    async def client_ready(self, client, db):
        # Add event listener for the ".nercy" command
        client.add_event_handler(self.nercy_handler, events.NewMessage(pattern=r"\.nercy"))

    async def nercy_handler(self, event: Message):
        """Handle the ".nercy" command"""
        # Change the message to "Nercy bot - working"
        await event.edit(self.strings("working", event))
