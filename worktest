import logging

from telethon import events
from telethon.tl.types import Message

from .. import loader, utils


logger = logging.getLogger(__name__)


@loader.tds
class NercyMod(loader.Module):
    """A simple module that responds to the ".nercy" command"""

    strings = {
        "name": "Work",
        "working": "Bot - working",
    }

    async def client_ready(self, client, db):
        # Add event listener for the ".test" command
        client.add_event_handler(self.nercy_handler, events.NewMessage(pattern=r"\.test"))

    async def nercy_handler(self, event: Message):
        """Handle the ".test" command"""
        # Change the message to "Bot - working"
        await event.edit(self.strings("working", event))
