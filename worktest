import logging

from telethon.tl.types import Message

from .. import loader, utils

logger = logging.getLogger(__name__)


@loader.tds
class BotStatusMod(loader.Module):
    """Module that changes the message to "Bot is running" at the command "(prefix)bot"""

    strings = {
        "name": "Bot Status",
        "bot_running": "ðŸ¤– <b>Bot is running</b>",
        "bot_stopped": "ðŸ›‘ <b>Bot is stopped</b>",
    }

    async def client_ready(self, client, db):
        self._running = True

    @loader.command(name="bot")
    async def bot_cmd(self, message: Message):
        """Toggles the bot status"""
        if self._running:
            self._running = False
            await message.edit(self.strings("bot_stopped", message))
        else:
            self._running = True
            await message.edit(self.strings("bot_running", message))
